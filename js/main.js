!function(){"use strict";var t={canvasWidth:"1050",canvasHeight:"500",padding:[80,40,40,40],xAxisText:"Date",yAxisText:"Gross Domestic Product, USA"},a=function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,a){for(var n=0;n<a.length;n++){var e=a[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(a,n,e){return n&&t(a.prototype,n),e&&t(a,e),a}}(),e=function(){function t(n,e,i){a(this,t),this.config=e,this.innerWidth=e.canvasWidth-e.padding[0]-e.padding[2],this.innerHeight=e.canvasHeight-e.padding[1]-e.padding[3],this.startX=e.padding[0],this.startY=e.padding[1],this.endX=e.canvasWidth-e.padding[2],this.endY=e.canvasHeight-e.padding[3];var s=this.createSvgCanvas(n);this.svg=s.canvas,this.dataGroup=s.dataGroup,this.tooltip=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),i(this)}return n(t,[{key:"getData",value:function(t,a){var n=new XMLHttpRequest;n.overrideMimeType("application/json"),n.open("GET",t,!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){console.log("BarGraph.getData: Data loaded");var t=JSON.parse(n.responseText);a(t)}},n.send(null)}},{key:"setData",value:function(t){this.data=t;var a=d3.max(this.data,function(t){return t[1]});this.scaleX=d3.scale.ordinal().domain(t.map(function(t){return t[0]})).rangeBands([0,this.innerWidth],0,0),this.scaleY=d3.scale.linear().domain([0,a]).range([this.innerHeight,0]);var n=new Date(d3.min(this.data,function(t){return t[0]})),e=new Date(d3.max(this.data,function(t){return t[0]})),i=d3.time.scale().domain([n,e]).range([0,this.innerWidth-this.scaleX.rangeBand()]);this.axisX=d3.svg.axis().scale(i).ticks(20).orient("bottom"),this.svg.append("text").attr("x",this.config.canvasWidth/2).attr("y",this.config.canvasHeight-this.config.padding[3]/2+20).style("text-anchor","middle").text(this.config.xAxisText),this.axisY=d3.svg.axis().scale(this.scaleY).ticks(20).orient("left"),this.svg.append("text").attr("transform","rotate(-90)").attr("x",-this.startY).attr("y",this.startX+20).style("text-anchor","end").text(this.config.yAxisText)}},{key:"showData",value:function(){var t=this,a=d3.time.format("%Y - %B"),n=this.dataGroup.selectAll("p").data(this.data);n.exit().remove(),n.enter().append("rect").attr("x",function(a){return t.scaleX(a[0])}).attr("y",function(a){return t.scaleY(a[1])}).attr("height",function(a){return t.innerHeight-t.scaleY(a[1])}).attr("width",this.scaleX.rangeBand()).attr("class","bar").on("mouseover",function(n){var e=new Date(n[0]);t.tooltip.transition().duration(200).style("opacity",.9),t.tooltip.style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY-30+"px"),t.tooltip.html("<strong>$"+n[1].toLocaleString("en")+" Billions</strong><br>\n                               "+a(e))}).on("mouseout",function(){t.tooltip.transition().duration(500).style("opacity",0)}),this.svg.append("g").attr("class","x axis").attr("transform","translate("+this.startX+", "+this.endY+")").call(this.axisX),this.svg.append("g").attr("class","y axis").attr("transform","translate("+this.startX+", "+this.startY+")").call(this.axisY)}},{key:"createSvgCanvas",value:function(t){var a=d3.select(t).append("svg").attr("width",this.config.canvasWidth).attr("height",this.config.canvasHeight),n=a.append("g").attr("transform","translate("+this.startX+", "+this.startY+")");return{canvas:a,dataGroup:n}}}]),t}();new e(".barGraph",t,function(t){console.log("BarChart constructed"),t.getData("datasets/GDP-data.json",function(a){console.log("getData finished"),t.setData(a.data),t.showData(),console.log("ShowData finished")})})}();